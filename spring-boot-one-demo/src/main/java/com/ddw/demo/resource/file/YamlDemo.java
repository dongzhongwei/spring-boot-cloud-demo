package com.ddw.demo.resource.file;

import com.ddw.demo.domain.User;
import org.springframework.boot.bind.PropertiesConfigurationFactory;
import org.springframework.boot.env.PropertySourcesLoader;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.DefaultResourceLoader;

public class YamlDemo {
    public static void main(String[] args) throws Exception {
        PropertySourcesLoader propertySourcesLoader = new PropertySourcesLoader();
        propertySourcesLoader.load(new ClassPathResource("application.yml"));
        PropertiesConfigurationFactory<User> propertiesConfigurationFactory = new PropertiesConfigurationFactory<>(User.class);
        propertiesConfigurationFactory.setTargetName("user");
        propertiesConfigurationFactory.setPropertySources(propertySourcesLoader.getPropertySources());
        final User user = propertiesConfigurationFactory.getObject();
        System.out.println(user.toString());

    }
}
